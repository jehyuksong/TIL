# ì˜¤ëŠ˜ í•œ ì¼ğŸ”¥

- íšŒì›ê°€ì…,ë¡œê·¸ì¸,ì¸ì¦ ê¸°ëŠ¥ê¹Œì§€ Boiler-Plateë¡œ ë§Œë“œëŠ” ìˆ˜ì—…ì„ ë“¤ìœ¼ë©´ì„œ ì‹¤ìŠµí–ˆë‹¤.
- React,Redux,mongoose,express,Bcrypt ë“±ì„ ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©í•˜ë©´ì„œ ì‹¤ìŠµí–ˆë‹¤.

---

# ì˜¤ëŠ˜ ëŠë‚€ ì ğŸ”¥

- React , Redux ë“¤ì–´ê°€ëŠ” ìˆœê°„ë¶€í„°ëŠ” ë­ê°€ ë­”ì§€ë„ ëª¨ë¥´ëŠ”ë° ê·¸ëƒ¥ ì­‰ í•´ë³´ë©´ì„œ ì´ëŸ°ê±°êµ¬ë‚˜.......ì •ë„ë§Œ ìƒê°í–ˆëŠ”ë° ì‚¬ì‹¤ ë¨¸ë¦¬ì— ë‚¨ëŠ” ê±´ í•˜ë‚˜ë„ ì—†ë‹¤. ë¦¬ì•¡íŠ¸ ê¸°ì´ˆë¶€í„° ê³µë¶€ë¥¼ í•´ì•¼í•  í•„ìš”ì„±ì´ ë§¤ìš°ë§¤ìš°ë§¤ìš° ëŠê»´ì§„ë‹¤.

---

# Boiler-plate ë§Œë“¤ê¸°

### Auth ë§Œë“¤ê¸°

- ë¡œê·¸ì¸ ê¶Œí•œì´ í•„ìš”í•œ í˜ì´ì§€ê°€ ìˆê³  ì•„ë‹Œ í˜ì´ì§€ê°€ ìˆì„ í…ë° ë¡œê·¸ì¸í–ˆì„ ë•Œ ì¿ í‚¤ì— ì €ì¥í•˜ëŠ” ë“±ìœ¼ë¡œ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒ.

```jsx
// ì„œë²„.js

app.get("/api/users/auth", auth, function (req, res) {
  // ì—¬ê¸°ê¹Œì§€ ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µê³¼í•´ ì™”ë‹¤ëŠ” ì–˜ê¸°ëŠ” Authenticationì´ true ë¼ëŠ” ë§.

  res.status(200).json({
    _id: req.user._id,
    isAdmin: req.user.role === 0 ? false : true, //role 0 - ì¼ë°˜ ìœ ì € , 1 - ê´€ë¦¬ì
    isAuth: true,
    email: req.user.email,
    name: req.user.name,
    lastname: req.user.lastname,
    role: req.user.role,
    image: req.user.image
  });
});
```

- ë£¨íŠ¸ì— middleware í´ë”ë¥¼ ë§Œë“¤ê³ ,ì•ˆì— auth.js íŒŒì¼ì„ ë§Œë“ ë‹¤.

```jsx
// auth.js

const User = require("../models/User");

let auth = (req, res, next) => {
  // ì¸ì¦ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê³³

  // í´ë¼ì´ì–¸íŠ¸ ì¿ í‚¤ì—ì„œ í† í°ì„ ê°€ì ¸ì˜¨ë‹¤.
  let token = req.cookies.x_auth;

  // í† í°ì„ ë³µí˜¸í™” í•œ í›„ì— ìœ ì €ë¥¼ ì°¾ëŠ”ë‹¤.
  User.findByToken(token, (err, user) => {
    if (err) throw err;
    if (!user) return res.json({ isAuth: false, error: true });

    req.token = token;
    req.user = user;
    next();
  });

  // ìœ ì €ê°€ ìˆìœ¼ë©´ ì¸ì¦ ì„±ê³µ

  // ìœ ì €ê°€ ì—†ìœ¼ë©´ ì¸ì¦ ì‹¤íŒ¨
};

module.exports = { auth };
```

```jsx
// User.js

userSchema.statics.findByToken = function (token, cb) {
  const user = this;

  // í† í°ì„ decodeí•œë‹¤.
  jwt.verify(token, "secretToken", function (err, decoded) {
    // ìœ ì € idë¥¼ ì´ìš©í•´ì„œ ìœ ì €ë¥¼ ì°¾ì€ ë‹¤ìŒì—
    // í´ë¼ì´ì–¸íŠ¸ì—ì„œ ê°€ì ¸ì˜¨ í† í°ê³¼ DBì— ë³´ê´€ëœ í† í°ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸

    user.findOne({ _id: decoded, token: token }, function (err, user) {
      if (err) return cb(err);
      cb(null, user);
    });
  });
};
```

- êµ‰ì¥íˆ ë³µì¡í•˜ì§€ë§Œ ê³„ì† ë°˜ë³µí•˜ë©´ì„œ ê³µë¶€í•´ì•¼ê² ë‹¤.

---

### Logout

- í† í°ë§Œ ì—†ì• ì£¼ë©´ ë¡œê·¸ì•„ì›ƒëœë‹¤.

```jsx
// ì„œë²„.js

app.get("/api/users/logout", auth, function (req, res) {
  User.findOneAndUpdate({ _id: req.user._id }, { token: "" }, (err, user) => {
    if (err) return res.json({ success: false, err });
    return res.status(200).send({
      success: true
    });
  });
});
```

---

### ë¦¬ì•¡íŠ¸ ì´ìš©í•´ì„œ í”„ë¡ íŠ¸ì—”ë“œ ë§Œë“¤ê¸°

- ë£¨íŠ¸ì— client ë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆìœ¼ë¡œ ì´ë™í•´ì„œ **npx create-react-app .** ì„ ì‹¤í–‰í•´ì„œ ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ìš´ë°›ëŠ”ë‹¤.
- íŒŒì¼ êµ¬ì¡°ë¥¼ í”„ë¡œê·¸ë˜ë° í•˜ê¸° ì í•©í•˜ê²Œ ì„¤ì •í•œë‹¤.

```jsx
$ npm i react-router-dom
```

- App.js ì—ì„œ ë¼ìš°íŠ¸ë¥¼ ì„¤ì •í•´ì£¼ê¸° ìœ„í•´ì„œ ë¦¬ì•¡íŠ¸ ë¼ìš°í„° ë”ì„ ë‹¤ìš´ë°›ëŠ”ë‹¤.

```jsx
import LandingPage from "./components/views/LandingPage/LandingPage";
import LoginPage from "./components/views/LoginPage/LoginPage";
import RegisterPage from "./components/views/RegisterPage/RegisterPage";

function App() {
  return (
    <Router>
      <div>
        {/*
          A <Switch> looks through all its children <Route>
          elements and renders the first one whose path
          matches the current URL. Use a <Switch> any time
          you have multiple routes, but you want only one
          of them to render at a time
        */}
        <Switch>
          <Route exact path="/" component={LandingPage} />
          <Route exact path="/login" component={LoginPage} />
          <Route exact path="/register" component={RegisterPage} />
        </Switch>
      </div>
    </Router>
  );
}

export default App;
```

- ìœ„ì²˜ëŸ¼ App.jsì— ë¼ìš°í„°ë¥¼ ì„¤ì •í•´ì¤€ë‹¤.

```jsx
$ npm i axios
```

```jsx
$ npm i http-proxy-middleware
```

- í”„ë¡ íŠ¸ì—”ë“œì™€ ì„œë²„ì˜ í¬íŠ¸ê°€ ë‹¤ë¥¼ ê²½ìš°ì— í”„ë¡ì‹œë¥¼ ì´ìš©í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

```jsx
const { createProxyMiddleware } = require("http-proxy-middleware");

module.exports = function (app) {
  app.use("/api", createProxyMiddleware({ target: "http://localhost:5000", changeOrigin: true }));
};
```

- í”„ë¡ì‹œ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë©´ ì¸í„°ë„· ì‚¬ìš©ì„ ì œì–´í•˜ê³  ìºì‹œë¥¼ ì´ìš©í•´ì„œ ë” ë¹ ë¥´ê³  ë³´ì•ˆì´ ë” ì¢‹ë‹¤.

---

### ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ê°™ì´ ì‹¤í–‰í•˜ê¸°

```jsx
$ npm i concurrently
```

---

### Ant Design ì„ í†µí•´ì„œ UI êµ¬í˜„í•˜ê¸°

```jsx
// cd client
$ npm i antd
```

```jsx
// client ì˜ index.jsì—
import "antd/dist/antd.css";
```

### ë¦¬ë•ìŠ¤ ì„¤ì¹˜

```jsx
$ npm i redux react-redux redux-promise redux-thunk
```

- ì´í›„ì— ë¦¬ë•ìŠ¤ì™€ ê´€ë ¨í•´ì„œ ë„ˆë¬´ ë§ì€ ì„¤ì •ì„ í–ˆëŠ”ë° ë¬´ìŠ¨ ë§ì¸ì§€ í•˜ë‚˜ë„ ëª¨ë¥´ê² ë‹¤...ã…
- ì´ë²ˆì— í•˜ëŠ” ê±° ëë‚´ê³  ë¦¬ì•¡íŠ¸ ê¸°ì´ˆë¶€í„° ê³µë¶€ë¥¼ ì‹œì‘í•´ì•¼ê² ë‹¤ğŸ™ƒ

---

### íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê·¸ë¦¬ê³  ì¸ì¦ê¸°ëŠ¥ ê¹Œì§€ í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œë¥¼ ìˆ˜ì—…ì— ë”°ë¼ì„œ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ë¥¼ ë§Œë“¤ì–´ ë³´ëŠ”ë° ë­ê°€ ë­”ì§€ ëª¨ë¥´ê² ë‹¤. ë¦¬ë•ìŠ¤ëŠ” ë‘˜ì§¸ì¹˜ê³  ë¦¬ì•¡íŠ¸ ê¸°ì´ˆë¶€í„° ê³µë¶€í•„ìš”..
